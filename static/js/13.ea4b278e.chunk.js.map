{"version":3,"sources":["Dashboard.js"],"names":["GROUP","10","20","30","Dashboard","props","getOption","myChart","trades","trials","groupID","latestData","length","buy","stock","select","next","state","option","grid","left","right","top","bottom","containLabel","title","text","SELECTS","tooltip","trigger","axisPointer","type","lineStyle","width","xAxis","boundaryGap","data","Array","fill","map","_","index","yAxis","showMinLabel","showMaxLabel","min","value","parseInt","max","series","name","slice","markPoint","setOption","onBuyInputChange","setState","buyValue","onBuyBtnMax","maxBuy","onSellInputChange","sellValue","onSellBtnMax","position","onBuyBtnClick","warning","tradeConfirm","onSellBtnClick","onKeepBtnClick","amount","action","handleTrade","over","confirm","centered","okText","cancelText","content","onOk","toggleNext","principal","calculate","inputFormatter","lineRef","createRef","this","echarts","getInstanceByDom","current","undefined","init","prevProps","prevState","dispose","handleNext","averageCost","currentProfit","totalProfit","balance","marketValue","totalAsset","id","bordered","column","Item","label","onClick","className","ref","justify","span","size","block","step","precision","formatter","onChange","danger","nextProps","PureComponent","calc","toFixed"],"mappings":"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","file":"static/js/13.ea4b278e.chunk.js","sourcesContent":["import React, { createRef, PureComponent } from 'react';\nimport echarts from 'echarts/lib/echarts';\nimport 'echarts/lib/chart/line';\nimport 'echarts/lib/component/title';\nimport 'echarts/lib/component/tooltip';\nimport 'echarts/lib/component/markPoint';\nimport { Button, Col, Descriptions, InputNumber, message, Modal, Row } from 'antd';\n\nimport data from './data.json';\nimport { calc, SELECTS } from './App';\n\nconst GROUP = {\n  10: '朋友赠送您的',\n  20: '您自行选择的',\n  30: '您在朋友的建议下选择的',\n};\n\nexport default class Dashboard extends PureComponent {\n  constructor(props) {\n    super(props);\n    const { trades, principal = 5000, trials = 21 } = props;\n    const latestData = trades[trades.length - 1] || {};\n    this.state = {\n      over: latestData.buy && latestData.buy.length >= trials,\n      buyValue: 0,\n      sellValue: 0,\n      trades,\n      next: true,\n      ...calculate(trades, principal, false),\n    };\n    this.lineRef = createRef();\n  }\n\n  static getDerivedStateFromProps(nextProps, prevState) {\n    const { trades, principal = 5000 } = nextProps;\n    if (prevState.trades !== trades) {\n      return {\n        ...calculate(trades, principal, false),\n        trades,\n      };\n    }\n    return null;\n  }\n\n  componentDidMount() {\n    const { over } = this.state;\n    if (over) return;\n\n    this.myChart = echarts.getInstanceByDom(this.lineRef.current);\n    if (this.myChart === undefined) {\n      this.myChart = echarts.init(this.lineRef.current);\n    }\n    this.getOption();\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    const { trades } = this.props;\n    const { next } = this.state;\n    if (trades !== prevProps.trades || next !== prevState.next) {\n      this.getOption();\n    }\n  }\n\n  componentWillUnmount() {\n    this.myChart && this.myChart.dispose();\n    this.myChart = null;\n  }\n\n  getOption = () => {\n    if (!this.myChart) return;\n    const { trades, trials = 21, groupID } = this.props;\n    const latestData = trades[trades.length - 1];\n    if (!latestData) return;\n    const { buy, stock, select } = latestData;\n    const { next } = this.state;\n\n    const option = {\n      grid: {\n        left: '0',\n        right: '10px',\n        top: '35px',\n        bottom: '0',\n        containLabel: true,\n      },\n      title: {\n        text: `${GROUP[groupID] ? GROUP[groupID] : ''}${SELECTS[select] ? SELECTS[select] : ''}股票走势`,\n      },\n      tooltip: {\n        trigger: 'axis',\n        axisPointer: {\n          type: 'line',\n          lineStyle: {\n            width: 1.5,\n            type: 'dashed',\n          },\n        },\n      },\n      xAxis: {\n        boundaryGap: false,\n        data: Array(trials + 1).fill('').map((_, index) => `Point ${index}`),\n      },\n      yAxis: {\n        showMinLabel: false,\n        showMaxLabel: false,\n        min: (value) => parseInt(value.min - 1, 10),\n        max: (value) => parseInt(value.max + 2, 10),\n      },\n      series: [\n        {\n          name: '股票价格',\n          type: 'line',\n          data: data[stock].slice(3, buy.length + (next && buy.length ? 3 : 4)),\n          markPoint: {\n            data: [\n              { type: 'min', name: '最低值' },\n              { type: 'max', name: '最高值' },\n            ],\n          },\n        }\n      ],\n    };\n    this.myChart.setOption(option);\n  }\n\n  onBuyInputChange = (value) => {\n    this.setState({ buyValue: +value });\n  }\n\n  onBuyBtnMax = () => {\n    this.setState((state) => ({ buyValue: state.maxBuy }));\n  }\n\n  onSellInputChange = (value) => {\n    this.setState({ sellValue: +value });\n  }\n\n  onSellBtnMax = () => {\n    this.setState((state) => ({ sellValue: state.position }));\n  }\n\n  onBuyBtnClick = () => {\n    const { buyValue, maxBuy } = this.state;\n    if (!buyValue) return message.warning('买入数量需大于零！');\n    if (buyValue > maxBuy) {\n      this.setState({ buyValue: maxBuy });\n      return message.warning(`现金余额最多只能购买${maxBuy}股！`);\n    };\n    this.tradeConfirm('buy', buyValue, `买入${buyValue}股`);\n  }\n\n  onSellBtnClick = () => {\n    const { sellValue, position } = this.state;\n    if (!sellValue) return message.warning('卖出数量需大于零！');\n    if (sellValue > position) {\n      this.setState({ sellValue: position });\n      return message.warning(`当前持仓最多只能卖出${position}股！`);\n    }\n    this.tradeConfirm('sell', sellValue, `卖出${sellValue}股`);\n  }\n\n  onKeepBtnClick = () => {\n    this.tradeConfirm('', 0, '继续持有');\n  }\n\n  tradeConfirm = (option, amount, action) => {\n    const { trades, trials = 21, handleTrade } = this.props;\n    const latestData = trades[trades.length - 1];\n    if (latestData.buy.length >= trials) {\n      return this.setState({ over: true });\n    }\n    Modal.confirm({\n      centered: true,\n      okText: '确定',\n      cancelText: '取消',\n      title: `${action}${SELECTS[latestData.select] ? SELECTS[latestData.select] : ''}股票`,\n      content: '是否确认该操作？',\n      onOk: () => {\n        this.setState({\n          buyValue: 0,\n          sellValue: 0,\n          next: true,\n        });\n        handleTrade(option, amount);\n      },\n    });\n  }\n\n  toggleNext = () => {\n    const { trades, trials = 21, principal = 5000 } = this.props;\n    const latestData = trades[trades.length - 1];\n    const over = latestData.buy.length >= trials;\n    this.setState({\n      over,\n      next: false,\n      ...calculate(trades, principal, !over),\n    });\n  }\n\n  inputFormatter = (value) => parseInt(value, 10) || 0;\n\n  render() {\n    const { trades, trials = 21, handleNext } = this.props;\n    const {\n      over,\n      next,\n      buyValue,\n      sellValue,\n      averageCost,\n      position,\n      currentProfit,\n      totalProfit,\n      balance,\n      marketValue,\n      totalAsset,\n    } = this.state;\n    const latestData = trades[trades.length - 1] ?? {};\n    const { stock, buy } = latestData;\n\n    return over ? (\n      <div id=\"dashboard\">\n        <h2>本轮交易任务结束。</h2>\n        <Descriptions bordered column={1}>\n          <Descriptions.Item label=\"成本\">{+averageCost}</Descriptions.Item>\n          <Descriptions.Item label=\"持仓\">{position}</Descriptions.Item>\n          <Descriptions.Item label=\"总盈亏\">{+totalProfit}</Descriptions.Item>\n          <Descriptions.Item label=\"现金余额\">{+balance}</Descriptions.Item>\n          <Descriptions.Item label=\"股票市值\">{+marketValue}</Descriptions.Item>\n          <Descriptions.Item label=\"总资产\">{+totalAsset}</Descriptions.Item>\n        </Descriptions>\n        <h2>{`您在本轮交易任务的累计盈亏为：${+totalProfit}金币。`}</h2>\n        <Button type=\"primary\" onClick={handleNext}>点击继续</Button>\n      </div>\n    ) : (\n      <div id=\"dashboard\">\n        <div className=\"chart\" ref={this.lineRef} />\n        <div className=\"data\">\n          <div className=\"describe\">\n            <Descriptions bordered column={1} title=\"资产配置\">\n              <Descriptions.Item label=\"当前股价\">{data[stock][buy.length + (next ? 2 : 3)]}</Descriptions.Item>\n              <Descriptions.Item label=\"成本\">{+averageCost}</Descriptions.Item>\n              <Descriptions.Item label=\"持仓\">{position}</Descriptions.Item>\n              <Descriptions.Item label=\"当前盈亏\">{+currentProfit}</Descriptions.Item>\n              <Descriptions.Item label=\"总盈亏\">{+totalProfit}</Descriptions.Item>\n              <Descriptions.Item label=\"现金余额\">{+balance}</Descriptions.Item>\n              <Descriptions.Item label=\"股票市值\">{+marketValue}</Descriptions.Item>\n              <Descriptions.Item label=\"总资产\">{+totalAsset}</Descriptions.Item>\n            </Descriptions>\n          </div>\n          <div className=\"option\">\n            {\n              next ?\n              <>\n                <Row justify=\"center\">\n                  <Col className=\"input-label\">\n                    {\n                      latestData.buy.length >= trials ?\n                      '本轮交易任务结束，点击确认查看本轮交易信息。' :\n                      '本期交易结束，请点击确认进入下一个交易期！'\n                    }\n                  </Col>\n                </Row>\n                <Row justify=\"center\">\n                  <Col span={12}>\n                    <Button\n                      type=\"primary\"\n                      size=\"large\"\n                      block\n                      onClick={this.toggleNext}\n                    >确认</Button>\n                  </Col>\n                </Row>\n              </> :\n              <>\n                <Row justify=\"space-between\">\n                  <Col span={6} className=\"input-label\">买入股票数量</Col>\n                  <Col span={4}>\n                    <InputNumber\n                      min={0}\n                      step={1}\n                      precision={0}\n                      value={buyValue}\n                      formatter={this.inputFormatter}\n                      onChange={this.onBuyInputChange}\n                    />\n                  </Col>\n                  <Col span={5}>\n                    <Button\n                      type=\"link\"\n                      block\n                      onClick={this.onBuyBtnMax}\n                    >最大值</Button>\n                  </Col>\n                  <Col span={6}>\n                    <Button\n                      type=\"primary\"\n                      block\n                      onClick={this.onBuyBtnClick}\n                    >买入</Button>\n                  </Col>\n                </Row>\n                <Row justify=\"space-between\">\n                  <Col span={6} className=\"input-label\">卖出股票数量</Col>\n                  <Col span={4}>\n                    <InputNumber\n                      min={0}\n                      step={1}\n                      precision={0}\n                      value={sellValue}\n                      formatter={this.inputFormatter}\n                      onChange={this.onSellInputChange}\n                    />\n                  </Col>\n                  <Col span={5}>\n                    <Button\n                      type=\"link\"\n                      block\n                      onClick={this.onSellBtnMax}\n                    >最大值</Button>\n                  </Col>\n                  <Col span={6}>\n                    <Button\n                      type=\"primary\"\n                      danger\n                      block\n                      onClick={this.onSellBtnClick}\n                    >卖出</Button>\n                  </Col>\n                </Row>\n                <Row justify=\"end\">\n                  <Col span={6}>\n                    <Button\n                      block\n                      className=\"keep-btn\"\n                      onClick={this.onKeepBtnClick}\n                    >持仓不变</Button>\n                  </Col>\n                </Row>\n              </>\n            }\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nfunction calculate(trades, principal, next) {\n  const latestData = trades[trades.length - 1];\n  const {\n    averageCost = 0,\n    position = 0,\n    totalProfit = 0,\n    balance = 0,\n    marketValue = 0,\n    totalAsset = 0,\n    maxBuy = 0,\n  } = calc(latestData, principal, next);\n  const currentProfit = (data[latestData.stock][latestData.buy.length + (next ? 3 : 2)] - averageCost) * position;\n  return {\n    averageCost: averageCost.toFixed(4),    // 加权成本\n    position,       // 持仓\n    currentProfit: currentProfit.toFixed(4),  // 当前盈亏\n    totalProfit: totalProfit.toFixed(4),    // 总盈亏\n    balance: balance.toFixed(4),        // 现金余额\n    marketValue: marketValue.toFixed(4),    // 股票市值\n    totalAsset: totalAsset.toFixed(4),     // 总资产\n    maxBuy,\n  };\n}\n"],"sourceRoot":""}