(this["webpackJsonpstocks-simulation"]=this["webpackJsonpstocks-simulation"]||[]).push([[5],{128:function(t,e,n){},151:function(t,e,n){"use strict";n.r(e);n(121);var a=n(109),r=n(14),c=n(0),s=n.n(c),o=n(18),i=n.n(o),l=(n(128),n(87)),u=function(t){t&&t instanceof Function&&n.e(19).then(n.bind(null,492)).then((function(e){var n=e.getCLS,a=e.getFID,r=e.getFCP,c=e.getLCP,s=e.getTTFB;n(t),a(t),r(t),c(t),s(t)}))};i.a.render(Object(r.jsx)(s.a.StrictMode,{children:Object(r.jsx)("div",{id:"app",children:Object(r.jsx)(c.Suspense,{fallback:Object(r.jsx)(a.a,{size:"large",delay:100}),children:Object(r.jsx)(l.c,{})})})}),document.getElementById("root")),u()},34:function(t){t.exports=JSON.parse('{"Practice":[5,5,5,5,6,3,2,5,8,7,4,8],"A":[9.6,10.7,8.5,10,11.1,9.5,10.4,11.8,9.8,12.3,10,7.9,9.2,10.6,12.4,10.2,13.4,10.7,13.5,16.1,14.1,16.4,15.3,18],"B":[9.6,10.7,8.5,10,12.1,10.2,12.5,10.7,9,10.9,8.9,10.6,8.8,10.7,12.9,10.8,12.6,9.9,11.5,13.5,11.3,13.6,11.8,14],"C":[9.6,10.7,8.5,10,11.8,9.9,11.2,9.8,8.3,10,7.4,9.7,10.4,12.6,9.2,11.7,9.5,7.7,10.8,9.1,11.1,9,11.4,10],"D":[9.6,10.7,8.5,10,8.3,10.4,8.6,10.2,7.5,10.4,8.8,11.1,9.6,10.8,9.4,11,9,7.3,8.8,6.1,9,6.7,8.6,6],"E":[9.6,10.7,8.5,10,8.6,10.2,7.9,9.6,10.8,8.2,7.1,9.3,6.3,8.2,5.5,8,6.2,4.9,3.1,5.6,3.3,5.7,4.4,2]}')},87:function(t,e,n){"use strict";n.d(e,"a",(function(){return A})),n.d(e,"c",(function(){return L})),n.d(e,"b",(function(){return M})),n.d(e,"d",(function(){return W}));n(150);var a=n(111),r=(n(114),n(66)),c=(n(65),n(27)),s=(n(138),n(112)),o=n(45),i=n(44),l=n(35),u=n.n(l),d=(n(113),n(48)),f=n(57),b=n(14),h=(n(119),n(76)),x=(n(117),n(69)),j=n(92),p=n(93),g=n(97),v=n(95),O=n(0),k=n(29),m=n.n(k),P=n(34),w=Object(O.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(10)]).then(n.bind(null,153))})),y=Object(O.lazy)((function(){return Promise.all([n.e(2),n.e(14)]).then(n.bind(null,154))})),S=Object(O.lazy)((function(){return Promise.all([n.e(2),n.e(15)]).then(n.bind(null,155))})),I=Object(O.lazy)((function(){return Promise.all([n.e(4),n.e(9),n.e(16)]).then(n.bind(null,156))})),T=Object(O.lazy)((function(){return Promise.all([n.e(0),n.e(3),n.e(12)]).then(n.bind(null,157))})),D=Object(O.lazy)((function(){return Promise.all([n.e(0),n.e(3),n.e(13)]).then(n.bind(null,152))})),F=Object(O.lazy)((function(){return Promise.all([n.e(0),n.e(2),n.e(4),n.e(8),n.e(18)]).then(n.bind(null,158))})),C=Object(O.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(17)]).then(n.bind(null,159))})),N=Object(O.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(11)]).then(n.bind(null,160))})),A=["\u7532","\u4e59","\u4e19","\u4e01","\u620a","\u5df1","\u5e9a","\u8f9b"],z=["A","B","C","D","E"],B="981107",L=function(t){Object(g.a)(n,t);var e=Object(v.a)(n);function n(t){var a;return Object(j.a)(this,n),(a=e.call(this,t)).login=function(t){var e=t.uuid,n=t.groupID;m.a.setItem("userInfo",{uuid:e,groupID:n},(function(){a.setState({uuid:e,groupID:n})}))},a.closeModal=function(){m.a.setItem("noticed",!0,(function(){a.setState({noticed:!0,showNotice:!1})}))},a.clearUserInfo=function(){x.a.confirm({okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",title:"\u662f\u5426\u6e05\u9664\u7528\u6237\u6570\u636e\uff1f",content:[Object(b.jsx)("p",{children:"\u6e05\u9664\u7528\u6237\u6570\u636e\u540e\u4e5f\u5c06\u4f1a\u6e05\u9664\u5b9e\u9a8c\u6570\u636e\uff01\u8bf7\u8c28\u614e\u64cd\u4f5c\uff01"},"text"),Object(b.jsxs)("p",{children:["\u8bf7\u4e3b\u8bd5\u8f93\u5165\u5bc6\u7801\uff1a",Object(b.jsx)(h.a.Password,{onChange:function(t){a.clearPassword=t.target.value}})]},"password")],onOk:function(){var t=Object(f.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.clearPassword===B){t.next=3;break}return d.b.warning("\u4e3b\u8bd5\u6743\u9650\u624d\u80fd\u6e05\u9664\u7528\u6237\u6570\u636e\uff01"),t.abrupt("return");case 3:return a.clearPassword="",t.next=6,m.a.clear();case 6:a.setState({uuid:"",groupID:"",noticed:!1,showNotice:!0,trades:[],moods:[],status:0,practice:{},totalProfit:0});case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()})},a.clearDashboard=function(){x.a.confirm({okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",title:"\u662f\u5426\u6e05\u9664\u5f53\u524d\u8f6e\u5b9e\u9a8c\u6570\u636e",content:[Object(b.jsx)("p",{children:"\u6e05\u9664\u5b9e\u9a8c\u6570\u636e\u540e\uff0c\u60a8\u9700\u8981\u91cd\u65b0\u64cd\u4f5c\uff01\u8bf7\u8c28\u614e\u64cd\u4f5c\uff01"},"text"),Object(b.jsxs)("p",{children:["\u8bf7\u4e3b\u8bd5\u8f93\u5165\u5bc6\u7801\uff1a",Object(b.jsx)(h.a.Password,{onChange:function(t){a.clearPassword=t.target.value}})]},"password")],onOk:function(){var t=Object(f.a)(u.a.mark((function t(){var e,n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.clearPassword===B){t.next=3;break}return d.b.warning("\u4e3b\u8bd5\u6743\u9650\u624d\u80fd\u6e05\u9664\u5b9e\u9a8c\u6570\u636e\uff01"),t.abrupt("return");case 3:a.clearPassword="",e=a.state.trades,(n=e.slice()).pop(),a.setState({status:0,trades:n,totalProfit:U(n)},(function(){m.a.setItem("trades",n)}));case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()})},a.openNotice=function(){a.setState({showNotice:!0})},a.goBack=Object(f.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(-1!==a.state.status){t.next=7;break}return t.next=4,m.a.removeItem("trades");case 4:a.setState({error:!1,trades:[],moods:[],status:0}),t.next=8;break;case 7:window.location.reload();case 8:case"end":return t.stop()}}),t)}))),a.handleStart=function(t){a.setState((function(e){return{trades:[].concat(Object(i.a)(e.trades),[{select:t,stock:z[e.trades.length],buy:[300],sell:[0]}]),status:1}}),(function(){var t=a.state.trades;m.a.setItem("trades",t)}))},a.handleNext=function(){var t=U(a.state.trades);a.setState({status:0,totalProfit:t})},a.handleTrade=function(t,e){var n=a.state,r=n.trades,c=n.moods,s=r[r.length-1];if(s){var l=s.buy,u=s.sell;if(l.length!==u.length)return a.setState({status:-1});if(l.length>=21)r.length<5?a.setState({status:0}):c.length<4?a.setState({status:2}):a.setState({status:3});else{var d={};"buy"===t?(d.buy=[].concat(Object(i.a)(l),[e]),d.sell=[].concat(Object(i.a)(u),[0])):"sell"===t?(d.buy=[].concat(Object(i.a)(l),[0]),d.sell=[].concat(Object(i.a)(u),[e])):(d.buy=[].concat(Object(i.a)(l),[0]),d.sell=[].concat(Object(i.a)(u),[0]));var f=r.slice();f.splice(-1,1,Object(o.a)(Object(o.a)({},s),d)),a.setState({trades:f},(function(){m.a.setItem("trades",f)}))}}else a.setState({status:0})},a.onQuestionSubmit=function(t){a.setState({moods:t,status:3},(function(){m.a.setItem("moods",t)}))},a.saveTextAsFile=function(){x.a.confirm({okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",title:"\u5bfc\u51fa\u5b9e\u9a8c\u6570\u636e",content:[Object(b.jsx)("p",{children:"\u4e3a\u907f\u514d\u5b9e\u9a8c\u6570\u636e\u4e22\u5931\uff0c\u8bf7\u5728\u5bfc\u51fa\u5b9e\u9a8c\u6570\u636e\u540e\u53d1\u9001\u5230\u4e3b\u8bd5\u90ae\u7bb1\uff01"},"text"),Object(b.jsxs)("p",{children:["\u8bf7\u4e3b\u8bd5\u8f93\u5165\u5bc6\u7801\uff1a",Object(b.jsx)(h.a.Password,{onChange:function(t){a.clearPassword=t.target.value}})]},"password")],onOk:function(){var t=Object(f.a)(u.a.mark((function t(){var e,n,r,c,s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.clearPassword===B){t.next=3;break}return d.b.warning("\u4e3b\u8bd5\u6743\u9650\u624d\u80fd\u5bfc\u51fa\u5b9e\u9a8c\u6570\u636e\uff01"),t.abrupt("return");case 3:a.clearPassword="",e=a.state,n=e.uuid,r=e.groupID,c=e.trades,s=e.moods,J(E(c,s,n,r),n,r);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()})},a.handlePracticeNext=function(t){a.setState((function(e){return{practice:Object(o.a)(Object(o.a)({},e.practice),t)}}),(function(){var t=a.state.practice;m.a.setItem("practice",t)}))},a.state={loading:!0,uuid:"",groupID:"",noticed:!1,showNotice:!1,practice:{},trades:[],moods:[],status:0,error:!1,totalProfit:0},a.clearPassword="",a}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var t=Object(f.a)(u.a.mark((function t(){var e,n,a,r,c,s,i,l,d,f,b,h,x,j,p,g,v;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,m.a.getItem("userInfo");case 3:if(t.t1=e=t.sent,t.t0=null!==t.t1,!t.t0){t.next=7;break}t.t0=void 0!==e;case 7:if(!t.t0){t.next=11;break}t.t2=e,t.next=12;break;case 11:t.t2={};case 12:return s=t.t2,i=s.uuid,l=void 0===i?"":i,d=s.groupID,f=void 0===d?"":d,t.next=19,m.a.getItem("noticed");case 19:if(t.t4=n=t.sent,t.t3=null!==t.t4,!t.t3){t.next=23;break}t.t3=void 0!==n;case 23:if(!t.t3){t.next=27;break}t.t5=n,t.next=28;break;case 27:t.t5=!1;case 28:if(b=t.t5,h={uuid:l,groupID:f,noticed:b,showNotice:!b,loading:!1},l&&f){t.next=32;break}return t.abrupt("return",this.setState(h));case 32:return t.next=34,m.a.getItem("practice");case 34:if(t.t7=a=t.sent,t.t6=null!==t.t7,!t.t6){t.next=38;break}t.t6=void 0!==a;case 38:if(!t.t6){t.next=42;break}t.t8=a,t.next=43;break;case 42:t.t8={};case 43:if(x=t.t8,h.practice=x,x.buy&&x.sell&&x.test){t.next=47;break}return t.abrupt("return",this.setState(h));case 47:return t.next=49,m.a.getItem("trades");case 49:if(t.t10=r=t.sent,t.t9=null!==t.t10,!t.t9){t.next=53;break}t.t9=void 0!==r;case 53:if(!t.t9){t.next=57;break}t.t11=r,t.next=58;break;case 57:t.t11=[];case 58:return j=t.t11,t.next=61,m.a.getItem("moods");case 61:if(t.t13=c=t.sent,t.t12=null!==t.t13,!t.t12){t.next=65;break}t.t12=void 0!==c;case 65:if(!t.t12){t.next=69;break}t.t14=c,t.next=70;break;case 69:t.t14=[];case 70:p=t.t14,g=U(j),v=R(j,p),this.setState(Object(o.a)(Object(o.a)({},h),{},{moods:p,trades:j,status:v,totalProfit:g})),t.next=79;break;case 76:t.prev=76,t.t15=t.catch(0),this.setState({error:!0,loading:!1});case 79:case"end":return t.stop()}}),t,this,[[0,76]])})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this.state,e=t.loading,n=t.error,o=t.uuid,i=t.groupID,l=t.noticed,u=t.showNotice,d=t.trades,f=t.status,h=t.practice,x=t.totalProfit;if(e)return Object(b.jsx)("div",{id:"skeleton",children:Object(b.jsx)(s.a,{active:!0})});if(n||-1===f)return Object(b.jsx)(y,{status:f,goBack:this.goBack});if(!o||!i)return Object(b.jsx)(w,{login:this.login});var j="",p=null,g=f;if(h.buy&&h.sell)if(h.test)switch(g){case 0:j="\u5373\u5c06\u5f00\u59cb\u7b2c".concat(d.length+1,"\u8f6e\u5b9e\u9a8c"),p=Object(b.jsx)(F,{trades:d,groupID:i,handleStart:this.handleStart});break;case 1:j="\u6b63\u5728\u8fdb\u884c\u7b2c".concat(d.length,"\u8f6e\u5b9e\u9a8c"),p=Object(b.jsx)(D,{trades:d,groupID:i,handleTrade:this.handleTrade,handleNext:this.handleNext});break;case 2:j="\u5df2\u7ed3\u675f\u7b2c".concat(d.length,"\u8f6e\u5b9e\u9a8c"),p=Object(b.jsx)(N,{groupID:i,onQuestionSubmit:this.onQuestionSubmit});break;case 3:j="\u6240\u6709\u5b9e\u9a8c\u5df2\u7ed3\u675f",p=Object(b.jsx)(S,{totalProfit:x,saveTextAsFile:this.saveTextAsFile})}else j="\u7ec3\u4e60\u6d4b\u9a8c",p=Object(b.jsx)(C,{handlePracticeNext:this.handlePracticeNext});else j="\u7ec3\u4e60\u64cd\u4f5c",p=Object(b.jsx)(T,{handlePracticeNext:this.handlePracticeNext});return Object(b.jsxs)("div",{id:"main",children:[Object(b.jsx)(a.a,{backIcon:!1,title:"\u80a1\u7968\u6a21\u62df\u4ea4\u6613\u5b9e\u9a8c",subTitle:j,extra:[Object(b.jsx)(c.a,{type:"link",onClick:this.openNotice,children:"\u5b9e\u9a8c\u987b\u77e5"},"notice"),Object(b.jsx)(c.a,{danger:!0,type:"primary",onClick:this.clearUserInfo,children:"\u6e05\u9664\u7528\u6237\u6570\u636e"},"userInfo"),Object(b.jsx)(c.a,{danger:!0,onClick:this.clearDashboard,children:"\u6e05\u9664\u5f53\u524d\u8f6e\u5b9e\u9a8c\u6570\u636e"},"trades")],children:Object(b.jsx)("div",{className:"content",children:Object(b.jsxs)(r.b,{size:"small",column:2,children:[Object(b.jsx)(r.b.Item,{label:"\u88ab\u8bd5\u7f16\u53f7",children:o}),Object(b.jsx)("br",{}),Object(b.jsx)(r.b.Item,{label:"\u5206\u7ec4\u7f16\u53f7",children:i})]})})}),p,Object(b.jsx)(I,{noticed:l,visible:u,onCancel:this.closeModal})]})}}]),n}(O.PureComponent);function R(t,e){var n=t[t.length-1],a=n||{},r=a.buy,c=void 0===r?[]:r,s=a.sell,o=void 0===s?[]:s;return n?c.length>=21||o.length>=21?t.length<5?0:e.length<4?2:3:c.length<21&&c.length===o.length?1:-1:0}function M(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=t.stock,c=t.buy,s=t.sell;if(!r||!Array.isArray(c)||!Array.isArray(s)||a&&(c.length<21||s.length<21))return{};for(var o=0,i=0,l=0,u=0,d=0,f=0;f<c.length;f+=1)o+=c[f]*P[r][f+3],s[f]===d&&0!==d?(i=0,l=0):(i+=c[f]*P[r][f+3],l+=c[f]),d+=c[f]-s[f],u+=s[f]*P[r][f+3];var b=e+u-o,h=l<=0?0:i/l,x=d*P[r][c.length+(n?3:2)],j=b+x,p=j-e,g=Math.floor(b/P[r][c.length+(n?3:2)]);return{averageCost:h,position:d,totalProfit:p,balance:b,marketValue:x,totalAsset:j,maxBuy:g}}function U(t){for(var e=0,n=0;n<t.length;n+=1){var a=M(t[n],5e3,!1,!0).totalProfit;e+=void 0===a?0:a}return+e.toFixed(2)}function E(t,e,n,a){for(var r=[],c=0;c<t.length;c+=1){for(var s=[],o=t[c],i=o.buy,l=o.sell,u=o.stock,d={buy:[300],sell:[0],stock:u},f=void 0,b=0,h=0,x=0,j=0,p=0,g=300,v=10,O=0,k=0,m=[],w=1;w<i.length;w+=1){d.sell.push(l[w]),d.buy.push(i[w]);var y=M(d),S=y.averageCost,I=y.position,T=y.totalProfit,D=y.marketValue,F=0,C=0,N=0,A=0,z=(P[u][w+3]-v)*g,B=(P[u][w+3]-v)*l[w];P[u][w+3]>v?(F=z,N=B):P[u][w+3]<v&&(C=z,A=B),j+=F+N,p+=C+A,O+=N,k+=A,v=S,g=I;var L={Trial:w,Buy:i[w],Sell:l[w],"Current Stock Price":P[u][w+3],"Weighted Average Purchase Price":+S.toFixed(4),Position:I,"Current Profit":+((P[u][w+3]-S)*I).toFixed(4),"Total Profit":+T.toFixed(4),"Market Value":+D.toFixed(4),"Paper Gain":+F.toFixed(4),"Paper Lose":+C.toFixed(4),"Realized Gain":+N.toFixed(4),"Realized Lose":+A.toFixed(4)};if(l[w]>0){var R=P[u][w+3]-S;m.push(R),L["The Diff Of SP-WAPP"]=+R.toFixed(4),w>0&&(l[w]>l[w-1]?h+=l[w]:l[w]<l[w-1]&&(x+=l[w]))}s.push(L),void 0===f&&(b+=l[w])>=300&&(f=w)}var U=0===j?0:O/j,E=0===p?0:k/p;r.push({Round:c+1,"The Average Of SP-WAPP":+(m.reduce((function(t,e){return t+e}),0)/m.length).toFixed(4),Alpha:+((h-x)/(h+x)).toFixed(4),"Total Profit":+s[s.length-1]["Total Profit"].toFixed(4),"Trial While Sold 300 Shares":f,"Sell After Rise":h,"Sell After Fall":x,Trials:s,DE:+(U-E).toFixed(4),Stock:u})}return{Mood:e,"User ID":n,Trades:r,"Group ID":a,"Total Profit":r.reduce((function(t,e){return t+e["Total Profit"]}),0)}}function J(t,e,n){var a=JSON.stringify(t),r=new Blob([a],{type:"text/plain"}),c=document.createElement("a");c.download="stocks-simulation-".concat(e,"-").concat(n,".json"),c.innerHTML="Download File",null!==window.webkitURL?c.href=window.webkitURL.createObjectURL(r):(c.href=window.URL.createObjectURL(r),c.onclick=function(t){document.body.removeChild(t.target)},c.style.display="none",document.body.appendChild(c)),c.click()}function W(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,n=Object(O.useRef)();Object(O.useEffect)((function(){n.current=t})),Object(O.useEffect)((function(){if(null!==e){var t=setInterval((function(){n.current()}),e);return function(){return clearInterval(t)}}}),[e])}}},[[151,6,7]]]);
//# sourceMappingURL=main.29ad65e0.chunk.js.map